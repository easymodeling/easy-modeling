plugins {
    id 'java'
    id "org.sonarqube" version "3.3"
    id 'jacoco'
}

def projectVersion = '0.0.1-SNAPSHOT'

group 'xyz.v2my'
version projectVersion

subprojects {
    apply plugin: 'java'
    apply plugin: 'jacoco'

    group 'xyz.v2my'
    version projectVersion

    repositories {
        mavenCentral()
    }

    test {
        useJUnitPlatform()
        finalizedBy jacocoTestReport
    }

    jacocoTestReport {
        reports {
            xml.required = true
            csv.required = false
//            html.outputLocation = layout.buildDirectory.dir('jacocoHtml')
        }
    }
}

sonarqube {
    properties {
        property "sonar.projectKey", "zhezhangz_easy-modeling"
        property "sonar.organization", "zhezhangz"
        property "sonar.host.url", "https://sonarcloud.io"
        // ignore the example project
        property "sonar.exclusions", "example/**"
    }
}

test {
    useJUnitPlatform()
}
